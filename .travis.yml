env:
	global:
		- SWIFT_BRANCH=swift-5.2.1-release
		- SWIFT_VERSION=swift-5.2.1-RELEASE

matrix:
	include:
		- os: osx
			language: swift
			osx_image: xcode11.4
			install:
				- brew update
				- brew upgrade git
				- brew install git-lfs
				- git lfs install
				- swift package resolve
				script:
				- swift build
				- swift test
				- os: linux
					language: generic
					sudo: required
					dist: bionic
					install:
						- sudo apt-get install clang libicu-dev
						- mkdir swift
						- curl https://swift.org/builds/$SWIFT_BRANCH/ubuntu1804/$SWIFT_VERSION/$SWIFT_VERSION-ubuntu18.04.tar.gz -s | tar xz -C swift &> /dev/null
						- export PATH="$(pwd)/swift/$SWIFT_VERSION-ubuntu18.04/usr/bin:$PATH"
						- curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash
						- sudo apt-get install git-lfs
						- swift package resolve
					script:
						- swift build
						- swift test
